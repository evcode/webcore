
/* --------------------------------------------------
The core logical processing

>> Regular:
   main
    |
->accept
|   |
|   |fork
|___|  \
        \
        recv:  <<<<<<<<<<<<<<<<<<<< Client request
         |
      request
         |
         |fork
         |  \
         |   \----> CGI
         |           |
       read <-pipe- stdin
         |
      respond
         |
       send:  >>>>>>>>>>>>>>>>>>>>> respond Client


>> IO select:
       main
        |
----> select
|       |
|     accept
|       |
|      recv
|       |  \fork
|       |   \---> CGI
|       |          |
|      read <---- stdin
|       |
|    (next recv...)
|_______|

, and:
    cgi    main+conn    trans        io
     .         |          |          |
     .         |--------->|------->select <--------|
     .         |          |          $             |
     .         |       accept<-------|             |
     .         |          $          |             |
     .         |          |--------->| add fd      |
     .         |          |          |             |
     .         |        recv<--------|             |
     .         |          $          |             |
     .<--fork--|<---------|          |             |
     .        read        |          |             |
     .         $          |          |             |
     .------->send        |          |             |
     .         $          |          |             |
     .         |--------->|--------->| rm fd       |
     .         |          |          |-------------|
     .         |          |          |

-------------------------------------------------- */

TODO List:
* non-blocking calling
* thread-pool
* epoll
* libevent

* "close" and memory release
* "waitpid"
* EAGAIN...errno handling
* memory alloc container
